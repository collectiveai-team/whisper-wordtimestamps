image: 'r8.im/collectiveai-team/whisper-wordtimestamps'

build:
  gpu: true
  python_version: "3.9"
  cuda: "11.7.1"

  python_packages:
    - ffmpeg-python
    - tqdm==4.64.0
    - numpy==1.22.3
    - transformers==4.19.2
    - ffmpeg-python==0.2.0
    - more_itertools==8.14.0
  system_packages:
    - "ffmpeg"
    - "libsndfile1"
  run:
    - pip install torch==1.13.1+cu117 torchaudio==0.13.1+cu117 -f https://download.pytorch.org/whl/cu117/torch_stable.html
    # - pip install git+https://github.com/openai/whisper@v20231117
    - pip install setuptools-rust 
    - pip install openai-whisper==20231117

predict: "predict.py:Predictor"
